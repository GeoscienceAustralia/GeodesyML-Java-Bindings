## Java Bindings for GeodesyML v0.1.2

#### Background

<!-- ##### eGeodesy-->

The [eGeodesy Logical Model](http://icsm.govspace.gov.au/egeodesy/), developed by the
Permanent Committee on Geodesy (PCG) of the Australian and New Zealand
Intergovernmental Committee on Surveying and Mapping (ICSM), defines a
technology-independent language to model the core business processes, entities,
and relationships within the geodetic domain.

<!-- ##### GeodesyML-->

[GeodesyML](http://icsm.govspace.gov.au/egeodesy/egeodesy-schema/), an XML
implementation of the eGeodesy model, is a Geography Markup Language
([GML](http://www.opengeospatial.org/standards/gml))
application schema for transfer of geodetic information. For more information
about eGeodesy and GeodesyML, see http://icsm.govspace.gov.au/egeodesy/.

<!-- ##### Geoscience Australia-->

The National Geospatial Reference Systems (NGRS) section at Geoscience
Australia ([GA](http://www.ga.gov.au)) is adopting GeodesyML as the standard for
encoding and exchange of geodetic information.

This library is part of GA's codebase, released as open-source. It is a
work-in-progress; collaborators, users, and reviewers are more than welcome.

#### Implementation

Since the GeodesyML schema is in active development, currently in beta release,
the implementation relies heavily on code generation to minimise manual
intervention following schema updates.

The GeodesyML data tranfer objects (DTOs) are generated by JAXB-XJC (Java
Architecture for XML Binding - XML to Java Compiler). Marshalling and unmarshalling
is handled by the EclipseLink/MOXy implementation of JAXB.

Where JAXB-XJC falls short of generating satisfactory code, 
transformations of the generated DTOs are performed using
[Spoon](http://spoon.gforge.inria.fr/), an open-source library
for analysis and transformation of Java source code.

#### API

Besides the generated GeodesyML (and dependent schema) DTOs, the library
defines a service for marshalling and unmarshalling GeodesyML documents to and
from XML.

```java
public interface GeodesyMLMarshaller {
    <T extends Marshallable> void marshal(T t, Writer out);
    <T extends Marshallable> T unmarshal(Reader in, Class<T> t) throws TypeMismatchException;
    Marshallable unmarshal(Reader in) throws TypeMismatchException;
}
```

`Marshallable` is a marker interface, a compile-time witness to a
run-time capability. XML elements that are mapped to `Marshallable` DTOs can
appear as root elements of incoming and outgoing GeodesyML documents. Instances
of `Marshallable` can be arbitrary, but are currently limited to
`IgsSiteLogType` and subclasses of `AbstractFeatureType`, e.g., `GeodesyMLType`, `NodeType`, and `PositionType`.

See unit test-cases for usage.

#### Building

The library is organised as a single Maven project. There are three build profiles.

1. `mvn -Pjaxb compile` generates and compiles GeodesyML and dependent schema DTOs
2. `mvn -Pspoon compile` further transforms the generated DTOs and compiles the result
3. `mvn test` runs unit tests
4. `mvn package` prepares the library archive for inclusing in downstream projects

XML schemas that are publically available at well known locations are
downloaded on demand during the build process, rathen than stored in the source
tree. Exceptions are IgsSiteLog, GeodesyML, and GML schema files. We use the
subset of GML that is required by GeodesyML. Configure your HTTP proxy in the pom file.

#### Contact Information

Contributions and bug reports are welcome!

Please feel free to contact me through github or at lazar.bodor@ga.gov.au.

-Lazar Bodor





